<div class="w-75 w-xl-50 h-100 mx-auto d-flex flex-column justify-content-center">
  <!-- <div
    *ngIf="(successMessage$ | async) !== null"
    class="notice d-flex bg-light-success rounded border-success border border-dashed p-6 mb-4"
  >

    <i class="ki-duotone ki-information fs-2tx text-success me-4"
      ><span class="path1"></span><span class="path2"></span><span class="path3"></span
    ></i>


    <div class="d-flex flex-stack flex-grow-1">
      <div class="fw-semibold">
        <h4 class="text-gray-900 fw-bold">تم  بنجاح</h4>
        <div class="fs-6 text-gray-700">
          {{ successMessage$ | async }}
        </div>
      </div>
    </div>

  </div> -->
  <div class="modal-header">
    <h4 class="mb-5 fs-1">تحديث كلمة السر</h4>
  </div>
  <div class="form-group form-group-lg position-relative my-5">
    <form [formGroup]="UpdatePasswordForm">
      <label for="newPassword" class="fs-5 fw-semibold mb-2 fs-2 my-0">كلمة السر الجديدة</label>
      <input
        formControlName="newPassword"
        type="password"
        id="newPassword"
        class="form-control form-control-lg border-primary ps-15 fs-1 my-0"
        [ngClass]="{
          'is-valid': UpdatePasswordForm.controls.newPassword.valid,
          'is-invalid':
            UpdatePasswordForm.controls.newPassword.invalid &&
            (UpdatePasswordForm.controls.newPassword.dirty ||
              UpdatePasswordForm.controls.newPassword.touched)
        }"
        placeholder="New Password"
      />
      <ng-container
        [ngTemplateOutlet]="formError"
        [ngTemplateOutletContext]="{
          validation: 'required',
          message: 'كلمة السر مطلوبة',
          control: UpdatePasswordForm.controls['newPassword']
        }"
      >
      </ng-container>
      <ng-container
        [ngTemplateOutlet]="formError"
        [ngTemplateOutletContext]="{
          validation: 'pattern',
          message: 'يجب أن تحتوي كلمة السر على أحرف كبيرة وصغيرة وأرقام',
          control: UpdatePasswordForm.controls['newPassword']
        }"
      >
      </ng-container>
      <ng-container
        [ngTemplateOutlet]="formError"
        [ngTemplateOutletContext]="{
          validation: 'maxlength',
          message: 'يجب أن لا تتجاوز كلمة السر 100 حرف',
          control: UpdatePasswordForm.controls['newPassword']
        }"
      >
      </ng-container>
      <ng-container
        [ngTemplateOutlet]="formError"
        [ngTemplateOutletContext]="{
          validation: 'minlength',
          message: 'يجب أن تكون كلمة السر أكثر من 8 أحرف',
          control: UpdatePasswordForm.controls['newPassword']
        }"
      >
      </ng-container>
      <ng-container
        [ngTemplateOutlet]="formError"
        [ngTemplateOutletContext]="{
          validation: 'HaveToChange',
          message: 'يجب أن لا تكون مطابقة لكلمة السر القديمة',
          control: UpdatePasswordForm.controls['newPassword']
        }"
      >
      </ng-container>

      <div class="form-group form-group-lg position-relative my-5">
        <label for="confirmation" class="fs-5 fw-semibold mb-2 fs-2 my-0">تأكيد كلمة السر</label>
        <input
          formControlName="confirmationPassword"
          type="password"
          id="confirmation"
          class="form-control form-control-lg border-primary ps-15 fs-1 my-0"
          [ngClass]="{
            'is-valid': UpdatePasswordForm.controls.confirmationPassword.valid,
            'is-invalid':
              UpdatePasswordForm.controls.confirmationPassword.invalid &&
              (UpdatePasswordForm.controls.confirmationPassword.dirty ||
                UpdatePasswordForm.controls.confirmationPassword.touched)
          }"
          placeholder="Password confirmation"
        />

        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'required',
            message: 'كلمة السر مطلوبة',
            control: UpdatePasswordForm.controls['confirmationPassword']
          }"
        >
        </ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'pattern',
            message: 'يجب أن تحتوي كلمة السر على أحرف كبيرة وصغيرة وأرقام',
            control: UpdatePasswordForm.controls['confirmationPassword']
          }"
        >
        </ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'maxlength',
            message: 'يجب أن لا تتجاوز كلمة السر 100 حرف',
            control: UpdatePasswordForm.controls['confirmationPassword']
          }"
        >
        </ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'minlength',
            message: 'يجب أن تكون كلمة السر أكثر من 8 أحرف',
            control: UpdatePasswordForm.controls['confirmationPassword']
          }"
        >
        </ng-container>
        <ng-container
          [ngTemplateOutlet]="formError"
          [ngTemplateOutletContext]="{
            validation: 'passwordsMatch',
            message: 'كلمة السر غير متطابقة',
            control: UpdatePasswordForm.controls['confirmationPassword']
          }"
        >
        </ng-container>
      </div>
    </form>
  </div>
  <div class="form-group form-group-lg position-relative my-10">
    <button
      [disabled]="!checkUpdatePasswordFormValidation()"
      type="button"
      class="btn btn-primary form-control py-3 w-50 h-60px"
      (click)="submit()"
    >
      تحديث
    </button>
  </div>
</div>
<ng-template #formError let-validation="validation" let-message="message" let-control="control">
  <ng-container *ngIf="control.hasError(validation) && (control.dirty || control.touched)">
    <div class="form_alert">
      <p style="color: #ed4f9d" class="mt-3">{{ message }}</p>
    </div>
  </ng-container>
</ng-template>
