<div class="container mb-5 d-flex align-items-center justify-content-between">
  <a class="btn btn-sm btn-light fw-bold" routerLink="../"> Back To Communities </a>
  <!-- <h3>Community Name here</h3> -->
  <button class="btn btn-sm btn-primary fw-bold" (click)="PostToCommunity(content)">
    Add New Post
  </button>
</div>
<!-- Post Structure -->
<ng-container *ngFor="let post of posts | async">
  <div class="card card-bordered w-100 mt-10">
    <div class="card-body">
      <div class="w-100 d-flex justify-content-between mb-8">
        <div class="d-flex align-items-start">
          <div class="symbol symbol-50px me-5">
            <div class="symbol-label fs-1 fw-bold bg-light-success text-success">S</div>
          </div>
          <div class="d-flex flex-column fw-semibold fs-5 text-gray-600 text-gray-900">
            <div class="d-flex align-items-center">
              <a
                href="/metronic8/demo1/pages/user-profile/overview.html"
                class="text-gray-800 fw-bold text-hover-primary fs-5 me-3"
              >
                {{ post.name }}
              </a>
              <span class="m-0"></span>
            </div>
            <span class="text-muted fw-semibold fs-6">{{ post.post.createdAt | date }}</span>
          </div>
        </div>
        <div class="d-flex  justify-content-end">
          <div class="text-center d-flex flex-column align-items-center">
            <button
              (click)="like(post.post.id)"
              class="btn btn-lg heart-button btn-active-color-danger"
              [ngClass]="{ active: isLikedBefore(post.post.id) }"
            >
              <i class="fa fa-heart mb-0" style="font-size: 1.5rem"></i>
            </button>
            <span class="fw-bold fs-8 text-gray-900 mt-1">{{ post.post.likes }}</span>
          </div>
           <div class="text-center d-flex flex-column" *ngIf="userType === 'instructor' ||userType === 'admin'">
            <button
              (click)="deletePost(post.post.id)"
              class="btn btn-lg  btn-color-danger"
            >
              <i class="fa fa-trash mb-0" style="font-size: 1.5rem"></i>
            </button>
            <span class="fw-bold fs-8 text-gray-900 mt-1">Delete</span>
          </div>
        </div>
      </div>
      <p class="fw-normal fs-5 text-gray-700 m-0">
        {{ post.post.content }}
      </p>
    </div>
  </div>
</ng-container>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">Add a New Post</h4>
    <button
      type="button"
      class="btn btn-sm btn-icon btn-active-color-primary"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    >
      <i class="ki-duotone ki-cross fs-1">
        <span class="path1"></span><span class="path2"></span>
      </i>
    </button>
  </div>
  <div class="modal-body">
    <div class="card card-flush">
      <div class="card-body pt-2 pb-0">
        <div class="d-flex align-items-start">
          <div class="symbol symbol-50px me-3">
            <div class="symbol-label fs-1 fw-bold bg-light-primary text-primary">R</div>
          </div>
          <form [formGroup]="postForm">
            <div class="position-relative w-100">
              <textarea
                class="form-control form-control-solid border ps-5"
                rows="3"
                formControlName="content"
                data-kt-autosize="true"
                placeholder="Write your comment.."
                spellcheck="false"
                style="height: auto"
              ></textarea>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">
      Close
    </button>
    <button type="button" class="btn btn-primary" (click)="modal.close('Close click')">Post</button>
  </div>
</ng-template>
